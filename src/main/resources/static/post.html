<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>主頁</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.5.1/sockjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
    <link rel="stylesheet" href="access/css/chat.css">
    <link rel="stylesheet" href="access/css/post.css">
    <link rel="stylesheet" href="access/css/main.css">
</head>
<body>
<nav class="navbar">
    <div class="logo"></div>
    <img src="https://eve-social-media.s3.ap-northeast-1.amazonaws.com/easeBook.png" alt="Logo" id="navbarLogo">
    </div>
    <div class="search-bar">
        <input type="text" id="friendSearchInput" placeholder="搜尋用戶">
        <button id="friendSearchButton"><i class="fa fa-search"></i></button>
        <div id="friendSearchResult" class="search-result"></div>
    </div>
    <div class="notification">
        <div id="notificationIcon">
            <i class="fa fa-bell"></i>
            <span id="notificationCount" class="notification-count"></span>
        </div>
        <div id="messageNotificationIcon">
            <i class="fa fa-envelope"></i>
            <span id="messageNotificationCount" class="notification-count"></span>
        </div>
    </div>
    <div id="messageNotificationList" class="message-notification-list" style="display: none;"></div>
    <div id="notificationList" class="notification-list" style="display: none;"></div>
    <button id="logoutButton">登出</button>
</nav>
<div class="main-content">
    <div class="post-area">
        <form id="postForm" enctype="multipart/form-data">
            <div class="create-post">
                <textarea id="postContent" placeholder="發表你的想法..."></textarea>
                <div class="file-upload">
                    <label for="media">新增相片 / 影片</label>
                    <input type="file" id="media" accept="image/*, video/*" multiple>
                </div>
                <div class="preview-container" id="previewContainer"></div>
                <button id="postButton" type="button">發佈</button>
            </div>
        </form>
        <div id="posts"></div>
    </div>

    <div class="chat-container">
        <div class="chat-room-header">
            <img id="currentUserAvatar" class="chat-avatar" src="" alt="User Avatar"
                 onerror="this.src='https://eve-social-media.s3.ap-northeast-1.amazonaws.com/account.png';">
            <h3 id="UserName"></h3>
        </div>
        <div class="search-container">
            <input type="text" id="receiverSearch" placeholder="輸入好友名稱，開始聊天！">
            <button id="userSearchButton"><i class="fa fa-search"></i></button>
            <div id="userSearchResult" class="user-search-result" style="display: none;">
            </div>
        </div>
        <div id="chatRoomDivider" class="chat-room-divider">
            <span>聊天室</span>
        </div>
        <div id="friendsContainer" class="friends-container"></div>
    </div>
</div>
<div id="chatWindow" style="display: none;">
    <div class="chat-header">
        <img id="chatReceiverAvatar" class="chat-avatar" src="" alt="Receiver Avatar"
             onerror="this.src='https://eve-social-media.s3.ap-northeast-1.amazonaws.com/account.png';">
        <span id="chatReceiver"></span>
        <button id="closeChat">X</button>
    </div>
    <div id="chatBox" class="chat-box"></div>
    <div class="chat-input">
        <input type="text" id="chatInput" placeholder="請輸入訊息">
        <button onclick="sendMessage()">送出</button>
    </div>
</div>
<script src="access/js/init.js"></script>
<script src="access/js/common.js"></script>
<script src="access/js/post_common.js"></script>
<script src="access/js/post.js"></script>
<script src="access/js/friend.js"></script>
<script src="access/js/chat.js"></script>
</body>
</html>